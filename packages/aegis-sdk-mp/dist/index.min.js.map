{"version":3,"file":"index.min.js","sources":["../src/event.js","../src/index.js"],"sourcesContent":["class Event {\n  constructor() {\n    this.eventsMap = {};\n  }\n\n  /**\n   * 添加监听事件\n   * @param {String} name 事件名\n   * @param {Function} callback 事件回调函数\n   * @param {Object} context 事件执行上下文对象\n   */\n  on(name, callback, context) {\n    this.eventsMap[name] = this.eventsMap[name] || [];\n    this.eventsMap[name].push({\n      callback,\n      context,\n      ctx: context || this,\n    });\n    return this;\n  }\n\n  /**\n   * 移除事件监听\n   * @param {String} name 可选，事件名\n   * @param {Function} callback 可选，事件回调函数\n   * @param {Object} context 可选，事件执行上下文对象\n   */\n  off(name, callback, context) {\n    if (!name && !callback && !context) {\n      this.eventsMap = {};\n      return this;\n    }\n    const events = this.eventsMap[name];\n    if (events && events.length > 0) {\n      const retain = [];\n      if (callback || context) {\n        for (let j = 0; j < events.length; j++) {\n          const ev = events[j];\n          if (\n            (callback && callback !== ev.callback && callback !== ev.callback._callback) ||\n            (context && context !== ev.context)\n          ) {\n            retain.push(ev);\n          }\n        }\n        if (retain.length === 0) {\n          delete this.eventsMap[name];\n        } else {\n          this.eventsMap[name] = retain;\n        }\n      } else {\n        delete this.eventsMap[name];\n      }\n    }\n    return this;\n  }\n\n  /**\n   * 触发事件\n   * @param {String} name 事件名\n   * @param  {...any} args 参数\n   */\n  trigger(name, ...args) {\n    const events = this.eventsMap[name];\n    if (events && events.length > 0) {\n      events.forEach((item) => {\n        item.callback.apply(item.ctx, args);\n      });\n    }\n    return this;\n  }\n}\n\nexport default Event;\n","import Event from './event';\n\nexport class WeMiniprogramPerformance {\n  constructor(options = {}) {\n    this.options = options;\n    this.event = new Event();\n  }\n}\n\nexport const WeMiniprogramPerformanceType = {};\n"],"names":["Event","constructor","this","eventsMap","on","name","callback","context","push","ctx","off","events","length","retain","j","ev","_callback","trigger","args","forEach","item","apply","options","event"],"mappings":"oEAAA,MAAMA,EACJC,cACEC,KAAKC,UAAY,GASnBC,GAAGC,EAAMC,EAAUC,GAOjB,OANAL,KAAKC,UAAUE,GAAQH,KAAKC,UAAUE,IAAS,GAC/CH,KAAKC,UAAUE,GAAMG,KAAK,CACxBF,SAAAA,EACAC,QAAAA,EACAE,IAAKF,GAAWL,OAEXA,KASTQ,IAAIL,EAAMC,EAAUC,GAClB,IAAKF,IAASC,IAAaC,EAEzB,OADAL,KAAKC,UAAY,GACVD,KAET,MAAMS,EAAST,KAAKC,UAAUE,GAC9B,GAAIM,GAAUA,EAAOC,OAAS,EAAG,CAC/B,MAAMC,EAAS,GACf,GAAIP,GAAYC,EAAS,CACvB,IAAK,IAAIO,EAAI,EAAGA,EAAIH,EAAOC,OAAQE,IAAK,CACtC,MAAMC,EAAKJ,EAAOG,IAEfR,GAAYA,IAAaS,EAAGT,UAAYA,IAAaS,EAAGT,SAASU,WACjET,GAAWA,IAAYQ,EAAGR,UAE3BM,EAAOL,KAAKO,GAGM,IAAlBF,EAAOD,cACFV,KAAKC,UAAUE,GAEtBH,KAAKC,UAAUE,GAAQQ,cAGlBX,KAAKC,UAAUE,GAG1B,OAAOH,KAQTe,QAAQZ,KAASa,GACf,MAAMP,EAAST,KAAKC,UAAUE,GAM9B,OALIM,GAAUA,EAAOC,OAAS,GAC5BD,EAAOQ,SAASC,IACdA,EAAKd,SAASe,MAAMD,EAAKX,IAAKS,MAG3BhB,uCCnEJ,MACLD,YAAYqB,EAAU,IACpBpB,KAAKoB,QAAUA,EACfpB,KAAKqB,MAAQ,IAAIvB,yCAIuB"}