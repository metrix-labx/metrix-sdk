{"version":3,"file":"index.js","sources":["../src/event.js","../src/index.js"],"sourcesContent":["class Event {\n  constructor() {\n    this.eventsMap = {};\n  }\n\n  /**\n   * 添加监听事件\n   * @param {String} name 事件名\n   * @param {Function} callback 事件回调函数\n   * @param {Object} context 事件执行上下文对象\n   */\n  on(name, callback, context) {\n    this.eventsMap[name] = this.eventsMap[name] || [];\n    this.eventsMap[name].push({\n      callback,\n      context,\n      ctx: context || this,\n    });\n    return this;\n  }\n\n  /**\n   * 移除事件监听\n   * @param {String} name 可选，事件名\n   * @param {Function} callback 可选，事件回调函数\n   * @param {Object} context 可选，事件执行上下文对象\n   */\n  off(name, callback, context) {\n    if (!name && !callback && !context) {\n      this.eventsMap = {};\n      return this;\n    }\n    const events = this.eventsMap[name];\n    if (events && events.length > 0) {\n      const retain = [];\n      if (callback || context) {\n        for (let j = 0; j < events.length; j++) {\n          const ev = events[j];\n          if (\n            (callback && callback !== ev.callback && callback !== ev.callback._callback) ||\n            (context && context !== ev.context)\n          ) {\n            retain.push(ev);\n          }\n        }\n        if (retain.length === 0) {\n          delete this.eventsMap[name];\n        } else {\n          this.eventsMap[name] = retain;\n        }\n      } else {\n        delete this.eventsMap[name];\n      }\n    }\n    return this;\n  }\n\n  /**\n   * 触发事件\n   * @param {String} name 事件名\n   * @param  {...any} args 参数\n   */\n  trigger(name, ...args) {\n    const events = this.eventsMap[name];\n    if (events && events.length > 0) {\n      events.forEach((item) => {\n        item.callback.apply(item.ctx, args);\n      });\n    }\n    return this;\n  }\n}\n\nexport default Event;\n","import Event from './event';\n\nexport class WeMiniprogramPerformance {\n  constructor(options = {}) {\n    this.options = options;\n    this.event = new Event();\n  }\n}\n\nexport const WeMiniprogramPerformanceType = {};\n"],"names":[],"mappings":"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"}